/**
 * Pipeline-driven prompt execution service.
 *
 * Wires the canonical PromptExecutionPipeline together with the surrounding
 * services (sessions, gates, framework state) so the MCP tool only needs to
 * pass validated requests into the pipeline.
 */
import { ConfigManager } from '../../../config/index.js';
import { createSymbolicCommandParser } from '../../../execution/parsers/symbolic-operator-parser.js';
import { FrameworkManager } from '../../../frameworks/framework-manager.js';
import { FrameworkStateManager } from '../../../frameworks/framework-state-manager.js';
import { PromptGuidanceService } from '../../../frameworks/prompt-guidance/index.js';
import { LightweightGateSystem } from '../../../gates/core/index.js';
import { GateGuidanceRenderer } from '../../../gates/guidance/GateGuidanceRenderer.js';
import { Logger } from '../../../logging/index.js';
import { PromptAssetManager } from '../../../prompts/index.js';
import { ContentAnalyzer } from '../../../semantic/configurable-semantic-analyzer.js';
import { ConversationManager } from '../../../text-references/conversation.js';
import { TextReferenceManager } from '../../../text-references/index.js';
import { ConvertedPrompt, PromptData, ToolResponse } from '../../../types/index.js';
import { ToolDescriptionManager } from '../../tool-description-manager.js';
import type { MetricsCollector } from '../../../metrics/index.js';
export declare class PromptExecutionService {
    readonly inlineGateParser: ReturnType<typeof createSymbolicCommandParser>;
    private readonly logger;
    private readonly mcpServer;
    private readonly promptManager;
    private readonly configManager;
    private readonly semanticAnalyzer;
    private readonly conversationManager;
    private readonly textReferenceManager;
    private readonly responseFormatter;
    private readonly executionPlanner;
    private readonly parsingSystem;
    private readonly chainManagementService;
    private readonly lightweightGateSystem;
    private readonly gateReferenceResolver;
    private readonly gateGuidanceRenderer;
    private readonly chainSessionManager;
    private readonly argumentHistoryTracker;
    private frameworkStateManager?;
    private frameworkManager?;
    private promptGuidanceService?;
    private chainOperatorExecutor?;
    private frameworkValidator;
    private toolDescriptionManager?;
    private analyticsService?;
    private promptPipeline?;
    private mcpToolsManager?;
    private convertedPrompts;
    private readonly serverRoot;
    constructor(logger: Logger, mcpServer: any, promptManager: PromptAssetManager, configManager: ConfigManager, semanticAnalyzer: ContentAnalyzer, conversationManager: ConversationManager, textReferenceManager: TextReferenceManager, mcpToolsManager?: any, promptGuidanceService?: PromptGuidanceService);
    updateData(_promptsData: PromptData[], convertedPrompts: ConvertedPrompt[]): void;
    setFrameworkStateManager(frameworkStateManager: FrameworkStateManager): void;
    setFrameworkManager(frameworkManager: FrameworkManager): void;
    setToolDescriptionManager(manager: ToolDescriptionManager): void;
    setAnalyticsService(analyticsService: MetricsCollector): void;
    setGateSystemManager(gateSystemManager: any): void;
    getLightweightGateSystem(): LightweightGateSystem;
    getGateGuidanceRenderer(): GateGuidanceRenderer;
    cleanup(): Promise<void>;
    executePromptCommand(args: {
        command?: string;
        llm_validation?: boolean;
        force_restart?: boolean;
        chain_id?: string;
        gate_verdict?: string;
        gate_action?: 'retry' | 'skip' | 'abort';
        user_response?: string;
        /** Unified gate specifications (canonical in v3.0.0+). Accepts gate IDs, simple checks, or full definitions. */
        gates?: import('../../../types/execution.js').GateSpecification[];
        options?: Record<string, unknown>;
    }, extra: any): Promise<ToolResponse>;
    /**
     * Extracts a chain_id from a bare command string when users send chain resumes
     * as the command value (common with LLM-generated calls). Only used for resume
     * scenarios to avoid colliding with real commands.
     */
    private extractChainId;
    private routeToTool;
    private buildPromptListFallback;
    private generatePromptEngineGuide;
    private initializePromptGuidanceService;
    private resetPipeline;
    private rebuildFrameworkValidator;
    private createChainOperatorExecutor;
    private resolveFrameworkContextForPrompt;
    private getFrameworkExecutionContext;
    private getPromptExecutionPipeline;
    private buildPromptExecutionPipeline;
    private createGateService;
}
export declare function createPromptExecutionService(logger: Logger, mcpServer: any, promptManager: PromptAssetManager, configManager: ConfigManager, semanticAnalyzer: ContentAnalyzer, conversationManager: ConversationManager, textReferenceManager: TextReferenceManager, mcpToolsManager?: any, promptGuidanceService?: PromptGuidanceService): PromptExecutionService;
export declare function cleanupPromptExecutionService(tool: PromptExecutionService): Promise<void>;
