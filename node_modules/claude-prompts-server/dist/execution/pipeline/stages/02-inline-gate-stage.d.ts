import { BasePipelineStage } from '../stage.js';
import type { TemporaryGateRegistry } from '../../../gates/core/temporary-gate-registry.js';
import type { GateReferenceResolver } from '../../../gates/services/gate-reference-resolver.js';
import type { Logger } from '../../../logging/index.js';
import type { ExecutionContext } from '../../context/execution-context.js';
export declare class InlineGateExtractionStage extends BasePipelineStage {
    private readonly temporaryGateRegistry;
    private readonly gateReferenceResolver;
    readonly name = "InlineGateExtraction";
    constructor(temporaryGateRegistry: TemporaryGateRegistry, gateReferenceResolver: GateReferenceResolver, logger: Logger);
    execute(context: ExecutionContext): Promise<void>;
    private applyGateCriteria;
    private applyGateResult;
    private appendGateId;
    private createInlineGate;
    private partitionGateCriteria;
    private lookupTemporaryGateId;
    private applyResolution;
    private getScopeId;
    private trackTemporaryGateScope;
    /**
     * Register temporary gates from MCP request before gate reference resolution.
     * Uses shared formatCriteriaAsGuidance() utility for proper criteria formatting.
     * This ensures gates are available when the gate reference resolver tries to find them.
     *
     * Uses normalized gates from metadata (supports unified 'gates' parameter and legacy parameters).
     */
    private registerTemporaryGatesFromRequest;
}
