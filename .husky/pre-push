#!/usr/bin/env sh

# Navigate to server directory
cd server || exit 1

echo "ğŸ” Running pre-push validation..."
echo ""

# Run full validation suite
echo "1/5 Type checking..."
npm run typecheck || { echo "âŒ Type checking failed"; exit 1; }

echo ""
echo "2/5 Linting..."
npm run lint -- --max-warnings 0 || { echo "âŒ Linting failed"; exit 1; }

echo ""
echo "3/5 Format checking..."
npm run format || { echo "âŒ Format checking failed"; exit 1; }

echo ""
echo "4/5 Running tests..."
npm run test:jest || { echo "âŒ Tests failed"; exit 1; }

echo ""
echo "5/5 Dependency validation..."
npm run validate:all || { echo "âŒ Dependency validation failed"; exit 1; }

echo ""
echo "âœ… All pre-push validation passed!"
echo ""
